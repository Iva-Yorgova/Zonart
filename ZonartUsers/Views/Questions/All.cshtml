@using Microsoft.AspNetCore.Identity

@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager


@{
    ViewData["Title"] = "Questions";
}

@{
    var userIsAdmin = User.IsInRole(WebConstants.AdminRoleName);
}

@model List<QuestionsListingViewModel>


<div class="row mt-5 mb-5 ml-5 mr-5" style="margin-bottom: 100px">

    <div class="col-12">
        <h2 style="font-size: 34px; text-align: center; padding-top: 100px; padding-bottom: 40px">Frequently Asked Questions</h2>
    </div>

    @if (userIsAdmin)
    {
        <div class="container">
            <div class="row-custom" style="padding-right: 20px; padding-left: 20px;">
                <div class="offset-sm-1 col-sm-10 offset-lg-4 col-lg-4 offset-xl-4 col-xl-4 offset-md-4 col-md-4" style="padding-right: 20px; padding-left: 20px; margin-bottom: 50px">
                    <div>
                        <a asp-area="" asp-controller="Questions" asp-action="Add" asp-route-id="" class="details-button mt-lg-30 mt-30 btn btn-block spacing-lg text-white pt-1 pb-1" style="background-color:dimgray; border:2px solid dimgray">Add New Question</a>
                    </div>

                </div>
            </div>
        </div>
    }


    @foreach (var question in Model)
    {
        <div class="col-8 offset-2">
            <button class="accordion mb-2">@question.Text</button>
            <div class="panel mt-4 mb-5">
                <p>@question.Answer</p>

                @if (userIsAdmin)
                {
                    <div class="row" style="margin-right:0; margin-left:0">
                        <div class="col" style="padding-right:0; padding-left:0">
                            <a asp-area="" asp-controller="Questions" asp-action="Edit" asp-route-id="@question.Id" class="details-button mt-lg-30 mt-30 btn btn-block spacing-lg text-white pt-1 pb-1" style="background-color:dimgray; border:none; width:80%">Edit</a>
                        </div>

                        <div class="col" style="padding-right:0; padding-left:0">
                            <a asp-controller="Questions" asp-action="Delete" asp-route-id="@question.Id" class="details-button mt-lg-30 mt-30 btn btn-block spacing-lg text-white pt-1 pb-1" style="background-color:orangered; border:none; width:100%">Delete</a>
                        </div>

                    </div>
                }
            </div>

        </div>
    }

</div>


<div id="mySidenav" class="sidenav">
    <a href="#" id="coming1">Coming Soon</a>
    <a href="#" id="coming2">Coming Soon</a>
    <a href="#" id="coming3">Coming Soon</a>
    <a href="#" id="coming4">Coming Soon</a>
</div>




<script>
    var acc = document.getElementsByClassName("accordion");
    var i;

    for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
                panel.style.maxHeight = null;
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
            }
        });
    }
</script>



<script>
    $(document).ready(function () {
        $(".active").removeClass("active");
        $("#questions").addClass("active");
    });
</script>